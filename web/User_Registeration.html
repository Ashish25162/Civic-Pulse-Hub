<!DOCTYPE html>
<html>
    <head>
        <title>Civic Pulse - Citizen Registration</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <style>
            :root {
                --primary-color: #2a5c82;
                --primary-light: #3a7ca5;
                --primary-dark: #1c3b5a;
                --secondary-color: #4a9c7d;
                --accent-color: #e76f51;
                --light-color: #f8f9fa;
                --dark-color: #2d3748;
                --gray-color: #718096;
                --gray-light: #e2e8f0;
                --gradient-primary: linear-gradient(135deg, #2a5c82 0%, #3a7ca5 100%);
                --gradient-secondary: linear-gradient(135deg, #4a9c7d 0%, #3a8369 100%);
                --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                --shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.12);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            }

            body {
                background-color: #f5f7fa;
                color: var(--dark-color);
                line-height: 1.6;
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
            }

            .register-container {
                display: flex;
                max-width: 1200px; /* Increased width to accommodate additional field */
                width: 100%;
                min-height: 700px; /* Slightly increased height */
                border-radius: 24px;
                overflow: hidden;
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
                transition: all 0.3s ease;
            }

            .register-container:hover {
                box-shadow: 0 25px 60px rgba(0, 0, 0, 0.2);
                transform: translateY(-5px);
            }

            /* Left Side - Form */
            .register-left {
                flex: 1.4; /* Increased flex to accommodate more form fields */
                background: white;
                padding: 50px;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            /* Right Side - Branding */
            .register-right {
                flex: 1; /* Adjusted flex ratio */
                background: var(--gradient-primary);
                color: white;
                padding: 50px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                position: relative;
                overflow: hidden;
            }

            .register-right::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none" opacity="0.1"><path d="M0,0 L100,0 L100,100 Z" fill="white"/></svg>');
                background-size: cover;
            }

            .logo {
                display: flex;
                align-items: center;
                gap: 20px;
                margin-bottom: 40px;
                position: relative;
                z-index: 1;
            }

            .logo-icon {
                width: 70px;
                height: 70px;
                border-radius: 16px;
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 32px;
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            }

            .logo-text h1 {
                font-size: 36px;
                font-weight: 800;
                margin-bottom: 8px;
                letter-spacing: 1px;
            }

            .logo-text p {
                font-size: 16px;
                opacity: 0.9;
                font-weight: 400;
            }

            .welcome-message {
                margin-top: 40px;
                position: relative;
                z-index: 1;
            }

            .welcome-message h2 {
                font-size: 32px;
                margin-bottom: 20px;
                font-weight: 700;
            }

            .welcome-message p {
                font-size: 16px;
                line-height: 1.7;
                opacity: 0.9;
                margin-bottom: 25px;
            }

            .benefits-list {
                list-style: none;
                margin-top: 30px;
            }

            .benefits-list li {
                display: flex;
                align-items: center;
                margin-bottom: 18px;
                font-size: 15px;
            }

            .benefits-list i {
                margin-right: 15px;
                background: rgba(255, 255, 255, 0.2);
                width: 32px;
                height: 32px;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 14px;
            }

            /* Form Styles */
            .register-header {
                text-align: center;
                margin-bottom: 40px;
            }

            .register-header h2 {
                font-size: 32px;
                color: var(--dark-color);
                margin-bottom: 10px;
                font-weight: 700;
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
                display: inline-block;
            }

            .register-header p {
                color: var(--gray-color);
                font-size: 16px;
            }

            form {
                width: 100%;
                max-width: 500px;
                margin: 0 auto;
            }

            .form-group {
                margin-bottom: 25px;
                position: relative;
            }

            .form-group label {
                display: block;
                margin-bottom: 10px;
                font-weight: 600;
                color: var(--dark-color);
                font-size: 15px;
            }

            .input-with-icon {
                position: relative;
            }

            .input-with-icon i {
                position: absolute;
                left: 18px;
                top: 50%;
                transform: translateY(-50%);
                color: var(--gray-color);
                font-size: 18px;
                z-index: 1;
            }

            .form-control {
                width: 100%;
                padding: 16px 20px 16px 52px;
                border: 1px solid var(--gray-light);
                border-radius: 12px;
                font-size: 16px;
                transition: all 0.3s ease;
                background-color: white;
                color: var(--dark-color);
            }

            .form-control.address-input {
                padding-left: 20px;
                resize: vertical;
                min-height: 80px;
                line-height: 1.5;
            }

            .form-control:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 3px rgba(42, 92, 130, 0.2);
            }

            .form-control:hover {
                border-color: var(--primary-light);
            }

            .password-requirements {
                background-color: #f8fafc;
                border: 1px solid #eef2f7;
                border-radius: 10px;
                padding: 15px;
                margin-top: 20px;
                margin-bottom: 25px;
            }

            .password-requirements h4 {
                font-size: 14px;
                font-weight: 700;
                color: var(--dark-color);
                margin-bottom: 10px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .password-requirements h4 i {
                color: var(--primary-color);
            }

            .requirements-list {
                list-style: none;
                font-size: 13px;
                color: var(--gray-color);
            }

            .requirements-list li {
                margin-bottom: 8px;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .requirements-list i {
                font-size: 12px;
                color: var(--secondary-color);
            }

            .requirements-list .invalid {
                color: var(--accent-color);
            }

            .requirements-list .invalid i {
                color: var(--accent-color);
            }

            .btn-register {
                width: 100%;
                padding: 18px;
                background: var(--gradient-secondary);
                color: white;
                border: none;
                border-radius: 12px;
                font-size: 17px;
                font-weight: 700;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-top: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
            }

            .btn-register:hover {
                background: linear-gradient(135deg, #3a8369 0%, #2a6b55 100%);
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(74, 156, 125, 0.3);
            }

            .btn-register:active {
                transform: translateY(0);
            }

            .login-link {
                text-align: center;
                margin-top: 30px;
                color: var(--gray-color);
                font-size: 15px;
            }

            .login-link a {
                color: var(--primary-color);
                text-decoration: none;
                font-weight: 600;
                transition: all 0.3s ease;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }

            .login-link a:hover {
                color: var(--primary-dark);
                gap: 12px;
            }

            .login-link a i {
                font-size: 14px;
            }

            /* Error/Success Messages */
            .alert {
                padding: 16px 20px;
                border-radius: 12px;
                margin-bottom: 25px;
                font-size: 15px;
                font-weight: 500;
                display: none;
            }

            .alert.error {
                background-color: #fef2f2;
                color: #dc2626;
                border: 1px solid #fecaca;
            }

            .alert.success {
                background-color: #f0fdf4;
                color: #16a34a;
                border: 1px solid #bbf7d0;
            }

            /* Password strength indicator */
            .password-strength {
                margin-top: 10px;
                height: 6px;
                border-radius: 3px;
                background-color: #e2e8f0;
                overflow: hidden;
            }

            .strength-bar {
                height: 100%;
                width: 0%;
                transition: all 0.3s ease;
                border-radius: 3px;
            }

            .strength-weak {
                background-color: var(--accent-color);
            }

            .strength-fair {
                background-color: var(--warning-color);
            }

            .strength-good {
                background-color: #4a9c7d;
            }

            .strength-strong {
                background-color: var(--secondary-color);
            }

            .strength-text {
                font-size: 12px;
                color: var(--gray-color);
                margin-top: 5px;
                text-align: right;
            }

            /* Responsive Design */
            @media (max-width: 900px) {
                .register-container {
                    flex-direction: column;
                    max-width: 600px; /* Increased for better form display */
                    min-height: auto;
                }

                .register-left, .register-right {
                    padding: 40px 30px;
                }

                .register-right {
                    order: 1;
                }

                .register-left {
                    order: 2;
                }

                .logo {
                    justify-content: center;
                }

                .welcome-message h2 {
                    text-align: center;
                }
            }

            @media (max-width: 480px) {
                .register-left, .register-right {
                    padding: 30px 20px;
                }

                .logo {
                    flex-direction: column;
                    text-align: center;
                    gap: 15px;
                }

                .logo-icon {
                    width: 60px;
                    height: 60px;
                    font-size: 26px;
                }

                .logo-text h1 {
                    font-size: 28px;
                }

                .register-header h2 {
                    font-size: 26px;
                }

                .welcome-message h2 {
                    font-size: 26px;
                }

                .form-control {
                    padding: 14px 16px 14px 48px;
                }
                
                .form-control.address-input {
                    padding-left: 16px;
                    min-height: 70px;
                }

                .btn-register {
                    padding: 16px;
                }
            }

            /* Animation for form */
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }

            .register-left form {
                animation: fadeIn 0.6s ease;
            }

            /* Pattern overlay for right side */
            .pattern-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0.05;
                background-image: radial-gradient(var(--light-color) 1px, transparent 1px);
                background-size: 30px 30px;
            }

            /* Form validation styles */
            .form-control.valid {
                border-color: var(--secondary-color);
            }

            .form-control.invalid {
                border-color: var(--accent-color);
            }

            .validation-message {
                font-size: 13px;
                margin-top: 5px;
                display: none;
            }

            .validation-message.valid {
                color: var(--secondary-color);
                display: block;
            }

            .validation-message.invalid {
                color: var(--accent-color);
                display: block;
            }
        </style>
    </head>
    <body>
        <div class="register-container">
            <!-- Left Side - Registration Form -->
            <div class="register-left">
                <div class="register-header">
                    <h2>Create Account</h2>
                    <p>Join Civic Pulse and contribute to your smart city</p>
                </div>
                
                <!-- Error/Success message container -->
                <div id="messageContainer" class="alert" style="display: none;"></div>
                
                <form action="User_Registeration" method="post" id="registrationForm">
                    <div class="form-group">
                        <label for="name">Full Name</label>
                        <div class="input-with-icon">
                            <i class="fas fa-user"></i>
                            <input type="text" 
                                   id="name" 
                                   name="name" 
                                   class="form-control" 
                                   placeholder="Enter your full name"
                                   required
                                   minlength="2"
                                   maxlength="50">
                        </div>
                        <div id="nameValidation" class="validation-message"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="mail">Email Address</label>
                        <div class="input-with-icon">
                            <i class="fas fa-envelope"></i>
                            <input type="email" 
                                   id="mail" 
                                   name="mail" 
                                   class="form-control" 
                                   placeholder="Enter your Gmail address"
                                   pattern="^[a-zA-Z0-9._%+-]+@gmail\.com$" 
                                   required>
                        </div>
                        <div id="emailValidation" class="validation-message"></div>
                        <small style="color: var(--gray-color); font-size: 13px; margin-top: 5px; display: block;">
                            Must be a valid Gmail address (username@gmail.com)
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="mobile">Mobile Number</label>
                        <div class="input-with-icon">
                            <i class="fas fa-phone"></i>
                            <input type="tel" 
                                   id="mobile" 
                                   name="mobile" 
                                   class="form-control" 
                                   placeholder="Enter your mobile number"
                                   pattern="[0-9]{10}"
                                   required>
                        </div>
                        <div id="mobileValidation" class="validation-message"></div>
                        <small style="color: var(--gray-color); font-size: 13px; margin-top: 5px; display: block;">
                            10-digit mobile number without country code
                        </small>
                    </div>
                    
                    <!-- NEW ADDRESS FIELD -->
                    <div class="form-group">
                        <label for="address">Address</label>
                        <div class="input-with-icon">
                            <i class="fas fa-home"></i>
                            <textarea 
                                id="address" 
                                name="address" 
                                class="form-control address-input" 
                                placeholder="Enter your full address (House no., Street, Area, City, Pincode)"
                                required
                                rows="3"
                                minlength="10"
                                maxlength="200"></textarea>
                        </div>
                        <div id="addressValidation" class="validation-message"></div>
                        <small style="color: var(--gray-color); font-size: 13px; margin-top: 5px; display: block;">
                            Please provide your complete address for better service allocation
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock"></i>
                            <input type="password" 
                                   id="password" 
                                   name="password" 
                                   class="form-control" 
                                   placeholder="Create a password" 
                                   required
                                   minlength="6"
                                   maxlength="20">
                        </div>
                        
                        <!-- Password strength indicator -->
                        <div class="password-strength">
                            <div id="strengthBar" class="strength-bar"></div>
                        </div>
                        <div id="strengthText" class="strength-text"></div>
                        
                        <div id="passwordValidation" class="validation-message"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="input-with-icon">
                            <i class="fas fa-lock"></i>
                            <input type="password" 
                                   id="confirmPassword" 
                                   name="confirmPassword" 
                                   class="form-control" 
                                   placeholder="Confirm your password" 
                                   required>
                        </div>
                        <div id="confirmPasswordValidation" class="validation-message"></div>
                    </div>
                    
                    <div class="password-requirements">
                        <h4><i class="fas fa-info-circle"></i> Password Requirements</h4>
                        <ul class="requirements-list">
                            <li id="reqLength"><i class="fas fa-circle"></i> At least 6 characters</li>
                            <li id="reqUppercase"><i class="fas fa-circle"></i> Contains uppercase letter</li>
                            <li id="reqLowercase"><i class="fas fa-circle"></i> Contains lowercase letter</li>
                            <li id="reqNumber"><i class="fas fa-circle"></i> Contains number</li>
                            <li id="reqSpecial"><i class="fas fa-circle"></i> Contains special character</li>
                        </ul>
                    </div>
                    
                    <button type="submit" class="btn-register">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                    
                    <div class="login-link">
                        Already have an account? 
                        <a href="user_login.html">
                            <i class="fas fa-sign-in-alt"></i> Login here
                        </a>
                    </div>
                </form>
            </div>
            
            <!-- Right Side - Branding & Benefits -->
            <div class="register-right">
                <div class="pattern-overlay"></div>
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="logo-text">
                        <h1>CIVIC PULSE</h1>
                        <p>Smart City Feedback System</p>
                    </div>
                </div>
                
                <div class="welcome-message">
                    <h2>Join Our Community</h2>
                    <p>Become an active citizen and help shape the future of our smart city. Your voice matters!</p>
                    
                    <ul class="benefits-list">
                        <li><i class="fas fa-bullhorn"></i> Report civic issues instantly</li>
                        <li><i class="fas fa-chart-line"></i> Track issue resolution progress</li>
                        <li><i class="fas fa-bell"></i> Get real-time notifications</li>
                        <li><i class="fas fa-star"></i> Rate service quality</li>
                        <li><i class="fas fa-users"></i> Connect with fellow citizens</li>
                        <li><i class="fas fa-shield-alt"></i> Secure and private</li>
                        <li><i class="fas fa-map-marker-alt"></i> Location-based issue reporting</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Feature Under Development Popup -->
        <div class="feature-popup" id="featurePopup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 10000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(4px);">
            <div class="feature-popup-content" style="background-color: white; border-radius: 16px; width: 90%; max-width: 450px; padding: 30px; position: relative; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2); border: 1px solid rgba(0, 0, 0, 0.05); text-align: center;">
                <div class="feature-icon" style="font-size: 50px; color: #e9c46a; margin-bottom: 20px;">
                    <i class="fas fa-tools"></i>
                </div>
                <div class="feature-title" style="font-size: 24px; font-weight: 700; color: #2a5c82; margin-bottom: 15px;">
                    ðŸš§ Feature Under Development
                </div>
                <div class="feature-message" style="font-size: 16px; color: #718096; line-height: 1.6; margin-bottom: 25px;">
                    This feature is currently being developed and will be available soon!<br><br>
                    Expected Release: Q2 2024
                </div>
                <button class="close-popup" onclick="closeFeaturePopup()" style="background: linear-gradient(135deg, #2a5c82 0%, #3a7ca5 100%); color: white; border: none; padding: 12px 30px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    OK
                </button>
            </div>
        </div>

        <script>
            // Feature popup functions
            function showFeaturePopup() {
                event.preventDefault();
                document.getElementById('featurePopup').style.display = 'flex';
            }
            
            function closeFeaturePopup() {
                document.getElementById('featurePopup').style.display = 'none';
            }
            
            // DOM Elements
            const form = document.getElementById('registrationForm');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');
            
            // Password strength checker
            function checkPasswordStrength(password) {
                let strength = 0;
                const requirements = {
                    length: password.length >= 6,
                    uppercase: /[A-Z]/.test(password),
                    lowercase: /[a-z]/.test(password),
                    number: /[0-9]/.test(password),
                    special: /[^A-Za-z0-9]/.test(password)
                };
                
                // Update requirement indicators
                Object.keys(requirements).forEach((req, index) => {
                    const reqElement = document.getElementById(`req${req.charAt(0).toUpperCase() + req.slice(1)}`);
                    if (requirements[req]) {
                        reqElement.classList.remove('invalid');
                        reqElement.querySelector('i').className = 'fas fa-check-circle';
                        reqElement.querySelector('i').style.color = 'var(--secondary-color)';
                        strength++;
                    } else {
                        reqElement.classList.add('invalid');
                        reqElement.querySelector('i').className = 'fas fa-circle';
                        reqElement.querySelector('i').style.color = 'var(--accent-color)';
                    }
                });
                
                // Update strength bar and text
                const percentage = (strength / 5) * 100;
                strengthBar.style.width = `${percentage}%`;
                
                if (password.length === 0) {
                    strengthBar.className = 'strength-bar';
                    strengthText.textContent = '';
                } else if (strength <= 2) {
                    strengthBar.className = 'strength-bar strength-weak';
                    strengthText.textContent = 'Weak';
                    strengthText.style.color = 'var(--accent-color)';
                } else if (strength === 3) {
                    strengthBar.className = 'strength-bar strength-fair';
                    strengthText.textContent = 'Fair';
                    strengthText.style.color = '#e9c46a';
                } else if (strength === 4) {
                    strengthBar.className = 'strength-bar strength-good';
                    strengthText.textContent = 'Good';
                    strengthText.style.color = '#4a9c7d';
                } else {
                    strengthBar.className = 'strength-bar strength-strong';
                    strengthText.textContent = 'Strong';
                    strengthText.style.color = 'var(--secondary-color)';
                }
                
                return requirements;
            }
            
            // Form validation functions
            function validateName() {
                const nameInput = document.getElementById('name');
                const nameValidation = document.getElementById('nameValidation');
                const name = nameInput.value.trim();
                
                if (name.length < 2) {
                    nameInput.classList.add('invalid');
                    nameInput.classList.remove('valid');
                    nameValidation.textContent = 'Name must be at least 2 characters long';
                    nameValidation.className = 'validation-message invalid';
                    return false;
                } else if (!/^[A-Za-z\s]+$/.test(name)) {
                    nameInput.classList.add('invalid');
                    nameInput.classList.remove('valid');
                    nameValidation.textContent = 'Name can only contain letters and spaces';
                    nameValidation.className = 'validation-message invalid';
                    return false;
                } else {
                    nameInput.classList.add('valid');
                    nameInput.classList.remove('invalid');
                    nameValidation.textContent = 'âœ“ Valid name';
                    nameValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            function validateEmail() {
                const emailInput = document.getElementById('mail');
                const emailValidation = document.getElementById('emailValidation');
                const email = emailInput.value.trim();
                const emailPattern = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
                
                if (!emailPattern.test(email)) {
                    emailInput.classList.add('invalid');
                    emailInput.classList.remove('valid');
                    emailValidation.textContent = 'Please enter a valid Gmail address';
                    emailValidation.className = 'validation-message invalid';
                    return false;
                } else {
                    emailInput.classList.add('valid');
                    emailInput.classList.remove('invalid');
                    emailValidation.textContent = 'âœ“ Valid email format';
                    emailValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            function validateMobile() {
                const mobileInput = document.getElementById('mobile');
                const mobileValidation = document.getElementById('mobileValidation');
                const mobile = mobileInput.value.trim();
                const mobilePattern = /^[0-9]{10}$/;
                
                if (!mobilePattern.test(mobile)) {
                    mobileInput.classList.add('invalid');
                    mobileInput.classList.remove('valid');
                    mobileValidation.textContent = 'Please enter a valid 10-digit mobile number';
                    mobileValidation.className = 'validation-message invalid';
                    return false;
                } else {
                    mobileInput.classList.add('valid');
                    mobileInput.classList.remove('invalid');
                    mobileValidation.textContent = 'âœ“ Valid mobile number';
                    mobileValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            // NEW: Address validation function
            function validateAddress() {
                const addressInput = document.getElementById('address');
                const addressValidation = document.getElementById('addressValidation');
                const address = addressInput.value.trim();
                
                if (address.length < 10) {
                    addressInput.classList.add('invalid');
                    addressInput.classList.remove('valid');
                    addressValidation.textContent = 'Address must be at least 10 characters long';
                    addressValidation.className = 'validation-message invalid';
                    return false;
                } else if (!/^[A-Za-z0-9\s,.-]+$/.test(address)) {
                    addressInput.classList.add('invalid');
                    addressInput.classList.remove('valid');
                    addressValidation.textContent = 'Address contains invalid characters';
                    addressValidation.className = 'validation-message invalid';
                    return false;
                } else {
                    addressInput.classList.add('valid');
                    addressInput.classList.remove('invalid');
                    addressValidation.textContent = 'âœ“ Valid address';
                    addressValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            function validatePassword() {
                const passwordValidation = document.getElementById('passwordValidation');
                const password = passwordInput.value;
                const requirements = checkPasswordStrength(password);
                
                if (password.length < 6) {
                    passwordInput.classList.add('invalid');
                    passwordInput.classList.remove('valid');
                    passwordValidation.textContent = 'Password must be at least 6 characters long';
                    passwordValidation.className = 'validation-message invalid';
                    return false;
                } else {
                    passwordInput.classList.add('valid');
                    passwordInput.classList.remove('invalid');
                    passwordValidation.textContent = 'âœ“ Password meets requirements';
                    passwordValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            function validateConfirmPassword() {
                const confirmPasswordValidation = document.getElementById('confirmPasswordValidation');
                const password = passwordInput.value;
                const confirmPassword = confirmPasswordInput.value;
                
                if (confirmPassword !== password) {
                    confirmPasswordInput.classList.add('invalid');
                    confirmPasswordInput.classList.remove('valid');
                    confirmPasswordValidation.textContent = 'Passwords do not match';
                    confirmPasswordValidation.className = 'validation-message invalid';
                    return false;
                } else if (confirmPassword.length === 0) {
                    confirmPasswordInput.classList.remove('valid');
                    confirmPasswordInput.classList.remove('invalid');
                    confirmPasswordValidation.textContent = '';
                    return false;
                } else {
                    confirmPasswordInput.classList.add('valid');
                    confirmPasswordInput.classList.remove('invalid');
                    confirmPasswordValidation.textContent = 'âœ“ Passwords match';
                    confirmPasswordValidation.className = 'validation-message valid';
                    return true;
                }
            }
            
            // Event Listeners
            document.getElementById('name').addEventListener('input', validateName);
            document.getElementById('mail').addEventListener('input', validateEmail);
            document.getElementById('mobile').addEventListener('input', validateMobile);
            document.getElementById('address').addEventListener('input', validateAddress); // NEW: Address input listener
            passwordInput.addEventListener('input', function() {
                validatePassword();
                validateConfirmPassword();
            });
            confirmPasswordInput.addEventListener('input', validateConfirmPassword);
            
            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const messageContainer = document.getElementById('messageContainer');
                
                // Clear previous messages
                messageContainer.style.display = 'none';
                messageContainer.className = 'alert';
                
                // Validate all fields
                const isNameValid = validateName();
                const isEmailValid = validateEmail();
                const isMobileValid = validateMobile();
                const isAddressValid = validateAddress(); // NEW: Validate address
                const isPasswordValid = validatePassword();
                const isConfirmPasswordValid = validateConfirmPassword();
                
                if (!isNameValid || !isEmailValid || !isMobileValid || !isAddressValid || !isPasswordValid || !isConfirmPasswordValid) {
                    messageContainer.textContent = 'Please fix all errors before submitting';
                    messageContainer.className = 'alert error';
                    messageContainer.style.display = 'block';
                    return;
                }
                
                // If validation passes, show loading state
                const submitBtn = this.querySelector('.btn-register');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating Account...';
                submitBtn.disabled = true;
                
                // Submit the form
                this.submit();
                
                // Re-enable button after 5 seconds (in case of server error)
                setTimeout(() => {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 5000);
            });
            
            // Check for URL parameters to show error/success messages from server
            document.addEventListener('DOMContentLoaded', function() {
                const urlParams = new URLSearchParams(window.location.search);
                const messageContainer = document.getElementById('messageContainer');
                
                if (urlParams.has('error')) {
                    const errorMsg = urlParams.get('error');
                    messageContainer.textContent = decodeURIComponent(errorMsg);
                    messageContainer.className = 'alert error';
                    messageContainer.style.display = 'block';
                }
                
                if (urlParams.has('success')) {
                    const successMsg = urlParams.get('success');
                    messageContainer.textContent = decodeURIComponent(successMsg);
                    messageContainer.className = 'alert success';
                    messageContainer.style.display = 'block';
                }
                
                // Add visual feedback on input focus
                const inputs = document.querySelectorAll('.form-control');
                inputs.forEach(input => {
                    input.addEventListener('focus', function() {
                        this.parentElement.parentElement.querySelector('label').style.color = 'var(--primary-color)';
                    });
                    
                    input.addEventListener('blur', function() {
                        if (!this.value) {
                            this.parentElement.parentElement.querySelector('label').style.color = 'var(--dark-color)';
                        }
                    });
                });
                
                // Initialize address validation
                validateAddress();
            });
            
            // Add hover effects for the close popup button
            document.addEventListener('DOMContentLoaded', function() {
                const closeBtn = document.querySelector('.close-popup');
                if (closeBtn) {
                    closeBtn.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 6px 18px rgba(42, 92, 130, 0.3)';
                    });
                    
                    closeBtn.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = 'none';
                    });
                }
            });
        </script>
    </body>
</html>